---
# tasks file for roles/common
- name: Install EPEL for extra packages
  dnf:
    name: epel-release
    state: present

- name: Update all packages
  dnf:
    name: "*"
    state: latest
    update_cache: yes

- name: Install common services and tools
  dnf:
    name:
      - chrony
      - firewalld
      - sl
      - tree
      - prometheus-node-exporter
      - fail2ban
    state: present

- name: Start and enable common services
  service:
    name: "{{item}}"
    state: started
    enabled: yes
  loop:
    - chronyd
    - firewalld
    - node_exporter
    - fail2ban

